<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek-OCR Client</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div class="header-left">
                    <h1>DeepSeek-OCR Client</h1>
                    <p class="disclaimer">Unaffiliated with DeepSeek</p>
                    <div class="status-bar">
                        <div class="status-item">
                            <span class="status-label">Server:</span>
                            <span id="server-status" class="status-value">Connecting...</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Model:</span>
                            <span id="model-status" class="status-value">Not loaded</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">GPU:</span>
                            <span id="gpu-status" class="status-value">Unknown</span>
                        </div>
                    </div>
                    <div class="header-links">
                        <a href="https://huggingface.co/deepseek-ai/DeepSeek-OCR" target="_blank">Model HuggingFace</a>
                        <span class="link-divider">•</span>
                        <a href="https://deepseek.ai/blog/deepseek-ocr-context-compression" target="_blank">Model Blog Post</a>
                        <span class="link-divider">•</span>
                        <a href="https://github.com/deepseek-ai/DeepSeek-OCR" target="_blank">Model GitHub</a>
                        <span class="link-divider">•</span>
                        <a href="https://github.com/ihatecsv/deepseek-ocr-client" target="_blank">Client GitHub</a>
                    </div>
                </div>

                <div class="header-divider"></div>

                <div class="header-right">
                    <div class="controls-section">
                        <div class="controls-grid">
                            <div class="form-group">
                                <label for="prompt-type">Type:</label>
                                <select id="prompt-type">
                                    <option value="document">Document</option>
                                    <option value="ocr">Other image</option>
                                    <option value="free">W/o layouts</option>
                                    <option value="figure">Figures</option>
                                    <option value="describe">General</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="base-size">Base:</label>
                                <select id="base-size">
                                    <option value="512">512</option>
                                    <option value="640">640</option>
                                    <option value="1024" selected>1024</option>
                                    <option value="1280">1280</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="image-size">Size:</label>
                                <select id="image-size">
                                    <option value="512">512</option>
                                    <option value="640" selected>640</option>
                                    <option value="1024">1024</option>
                                    <option value="1280">1280</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="crop-mode" checked>
                                    Crop
                                </label>
                            </div>
                        </div>

                        <div class="controls-buttons">
                            <button id="ocr-btn" class="btn btn-primary" disabled>
                                <span id="ocr-btn-text">Run OCR</span>
                            </button>
                            <button id="load-model-btn" class="btn btn-secondary">
                                Load Model
                            </button>
                        </div>
                    </div>

                    <div class="header-divider"></div>

                    <div class="upload-section">
                        <div id="drop-zone" class="drop-zone">
                            <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                            <p class="upload-text">Drop image or click</p>
                            <button id="select-btn" class="btn btn-primary btn-compact">Select</button>
                        </div>

                        <div id="preview-section" class="preview-section" style="display: none;">
                            <img id="image-preview" alt="Preview" class="preview-image-clickable">
                            <button id="clear-btn" class="btn btn-secondary btn-compact">Clear</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <div class="results-panel">
                <div class="results-section">
                    <div class="results-header">
                        <div class="results-title-row">
                            <h3>OCR Results</h3>
                            <div id="progress-inline" class="progress-inline" style="display: none;">
                                <div class="spinner-small"></div>
                                <span id="progress-status" class="progress-status"></span>
                            </div>
                        </div>
                        <div class="results-buttons">
                            <button id="view-boxes-btn" class="btn btn-small" style="display: none;">View Boxes Image</button>
                            <button id="view-tokens-btn" class="btn btn-small" style="display: none;">View Raw Tokens</button>
                            <button id="copy-btn" class="btn btn-small" style="display: none;">Copy to Clipboard</button>
                            <button id="download-zip-btn" class="btn btn-small" style="display: none;">Download ZIP</button>
                        </div>
                    </div>

                    <div id="model-progress" class="loading-indicator" style="display: none;">
                        <div class="spinner"></div>
                        <p id="progress-message">Loading model...</p>
                        <div class="progress-bar-container">
                            <div id="progress-bar" class="progress-bar"></div>
                        </div>
                        <p id="progress-stage" class="loading-subtext"></p>
                        <p id="progress-percent" class="loading-subtext">0%</p>
                    </div>

                    <div class="results-panels">
                        <div class="results-panel-left">
                            <div id="results-content" class="results-content"></div>
                        </div>

                        <div class="results-panel-right">
                            <div class="ocr-preview-wrapper">
                                <div id="ocr-preview-container" class="ocr-preview-container">
                                    <img id="ocr-preview-image" class="ocr-preview-image">
                                    <svg id="ocr-boxes-overlay" class="ocr-boxes-overlay"></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </main>
    </div>

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox" style="display: none;">
        <div class="lightbox-content">
            <span class="lightbox-close">&times;</span>
            <img id="lightbox-image" alt="Full size image">
            <pre id="lightbox-text" style="display: none;"></pre>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
